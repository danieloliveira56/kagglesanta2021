from main import local_search
import pytest


@pytest.mark.parametrize(
    "num_letters, string1, string2, expected",
    [
        (4, "1234123", "234123", "1234"),
        (4, "1234123", "1234", "234123"),
    ]
)
def test_local_search(num_letters, string1, string2, expected):
    for search_length in range(num_letters, len(string1)+1):
        string1 = local_search(num_letters, search_length=search_length, initial_solution=string1, other_strings=[string2])

    assert string1 == expected


@pytest.mark.parametrize(
    "num_letters, position, search_length, string1, other_strings",
    [
        (7, 204, 20, "1234567123465712346751234671253467123546321754362175432617543216754321765471362546213754736215437621543167245316742531674523167453216745312674531627453167243651274365124736512437651243675124365712436517243654612375421637542671354126735421673524163752416357241635274163524716352417635241673521467351246375124635712463517246351274635124763512467351426735146273514672351467325146735216473521674352167345216374521634752163457216345271634521763452167354261375417326145736214573612457361425736145273614572361457623145762134576214357621453762145463172543617254317265461327546327154362715412376451237645471326457132645173264513726453172645371264537216453726145372641537264513276453127645321764532716453276145327641532764513267451326475132*462731541672345167234547213615742361574326157436215743612574316257431265741326574123657412635741265374126573412657431256741325674123567412536741256374125673412567431257643125746312574361527436152473615243761524367152436175243615724361547236154732617453621745361274536172453617425361745236174532617435261743256174326517423651742635174265317426513742651734261573426175342167534217653421756342175364217534621753426173452617342561734265174326751432675413726547261354271635427631542736154273167524316752341675231467532146753124657312465371246531724653127465312476531246753142675314627531467253146752316475321647531264753162475316427531647253164752316541632754127635421763542713654217365241736521473652174365217346521736452173654213675413276541736254673125476312547361254673215476321457632147563214765321476352147632514763215476231543726154372163547263154731625471263547216357421635*7612345761234756132475613427561347256134752613475621347561234754176234517623475162347546271354732165461723456172346517234654612734561273454126375421376452137645417263451276345126734512637451263475126345712634517263412576341254162734516273465127346513274651324765132467153246713524671354621735426317543126754317625471623457162345416732546713254672315463127543612754316271543267154327615432716542637154236715423761542371654613724561374256137452613745621374561237456132745613724651372465467213541623745162374541376254172364517236454136275413267543127654716325462317542361754231675423176452317643521764354276135417632547231654617325476132574613257641325761432576134257613245761325476213542617354267315416372546371254637215436721543716254123674512367454712364571236475123647547312654623712543671254376125347612537461253764125376142537612453761254371265413672541273645127364125736412357641235467123456",
         [
            "6145732614235761423541672354162735462173546172354617325413267541236754362715463271456327146532714635271463257416325*4271634257163425176342516734251637425163472516342751634*4326175463217546371265473126547231654237165423176542361754263175426173546271354672135467312546713245671324657132467513246157324617532461735246173541623751462375142637514236751423765142736514276351427653142765134276514327651423756142375421637542137654327165432671546137254316725431267541263715426137541276354172635417362547316254732615472631547261354136275427136543217654321675421763543621734562173454367213456721346572136457213654721365742136572413657214365413726543172654361275463721542173654712365471326547136254371625347162537416253714625371642537162453716254376215421367541237654231675427316543276154276315427613541327654312765436172356417235614732561473526147356214735612473561427356147235617423561724356172546317254612735416372541367251436725134672541376254317625341726534712653472156347215364721534672153476215347216534726153472651437265147326514723651472635147265314726513472653417256341725364172534617253416725341762531476253174625317642531762453176254367126354712635431627546312754612371546237154126735462137542736154176325471632547236147523614753261475362147536124753614275361472536147623514762354176235471623547216354236715426371542167315462731546723154671235412736541723654173265437126543721654372615473621547361254732165243716524317652431567243156274351624735162437516243571642351764235167423516472351642735164237516423571643251764325167432516473251643725614372564137256431725643712564731256471325647123564712536471256347125643721564372516432756143275641327564312756432175643271564327516432571643527164357216435712643517264351276435126743512647351264375126435716243517624351672435162743561274356217435627143567214356712435671423567143256714352671435627413562471356241735624137562413576241356724135627431562473156243715624317562341576234156723415627341562374156234715623417562314756231745623175462317564231576421356742135647213564271356421735642137564213576421537462153742615374216537421563742153674215376421573642157634215764321576423156742315647231564273156423715642317562431576243154762315476321745632174653217463521746315247631524673152463715246317524631572463152746315742631574623517462357146235741623574612357462135746231574632157463251746325714632751463271546732154267315426713547621354761235476132541673254163274516324751632457163245176324516732451637245163274543761243576124375612437547631254613275423761****",
            "7214365721346752134672513647251367425136724513672547216354761325436172542637145263714256371425423176543216754213675423716452371645432617543271654273615476213547263145726314752631472563147254371625471326547231657423165724316572341657231465723164572316547236154732615436271453627145467231456723145473621546731245673124543267145326714543762154637214563721465372146357214637521436752143765214375621437526143752164375214637251463721546371245637124543127654632713456271345471263754126375432761543726154217365412736541327654132674153267413526471352641735264137524613752413675241376524137526413572614357261345726135742613572461357264157326415723641527364152376415236741523647152364175236415726341527634152673415263741526347152634175263415726431527643152674315264731526437152643175264315726413527641352674136257413624571362451736245*631274563127454763215467132547136254716327541632754613275463217547631245763124756312476153247615471236754123675421763541276354136725416372541673254176325417263547312645731264543217654213765423671452367142536714275631427564123756412735641275346127534162753412675341276534127563412753641275431672546137254617324561732465173246153724615327461532647153264175326417325641732546172354276135247613527461352761435276134527613542763145276314547612376541237654216735412673541627354167235436712453671245431726541372654173265417236542713652471365274136527143652713465271364527136542376145237614546712354216375426137542631745263174256317425476231546732156473215674321567342156732415637241563274156324715632417563241576324156732145673215462173546271354623175437216547321657432165734216573241653724165327416532471653241765324167532416573214657321645732165473162457316241537624153672415362741536247153624175362415736241543621754236175436127354612735463172456317245437126547162375416237546123754621375462371456237146523741652374615234765123476521347652314765234176523471652347615234671523461752346157234615273461523746512374652137465231746523714654672135462731456273145267314521367452136475213642571364251736425*312675431627543176254137625143627513462751364275136247513627451362754136275143625714362517436251473625143762513476251374625137642513762451376254173625417623547261354721365427316524731652743165273416527314652731645273165427163542617354267134526713425671342657143265714236571426357142653714265731425673142576314257316425731462573416257346125734621573462517346257134625731426571342675134267153427615342716534271563427153642715346271534267135426731547361254231675437612543672145367214***",
         ]),
    ]
)
def test_local_search2(num_letters, position, search_length, string1, other_strings):
    original_length = len(string1)

    string1 = local_search(num_letters, search_length=search_length, initial_solution=string1, other_strings=other_strings)

    assert len(string1) < original_length
